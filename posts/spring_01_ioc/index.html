<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:17.5px}</style><title>Spring_01_IOC</title>
<meta name=description content="Spring_01 IOC 1. Spring简介 1.1 框架介绍 框架，是经过验证，具有一定功能的，半成品软件。它的作用有：提高开发效率，增强可重用性，提供编写规范，节约维护成本，解耦底层实现原理。
1.2 Spring介绍 Spring是分层的JavaSE/EE应用full-stack轻量级开源框架，Spring …"><meta name=keywords content='blog,hugo,java,笔记,SpringIOC'><meta property="og:url" content="http://localhost:1313/posts/spring_01_ioc/"><meta property="og:type" content="website"><meta property="og:title" content="Spring_01_IOC"><meta property="og:description" content="Spring_01 IOC 1. Spring简介 1.1 框架介绍 框架，是经过验证，具有一定功能的，半成品软件。它的作用有：提高开发效率，增强可重用性，提供编写规范，节约维护成本，解耦底层实现原理。
1.2 Spring介绍 Spring是分层的JavaSE/EE应用full-stack轻量级开源框架，Spring …"><meta property="og:image" content="http://localhost:1313/images/cat.webp"><meta property="og:image:secure_url" content="http://localhost:1313/images/cat.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Spring_01_IOC"><meta name=twitter:description content="Spring_01 IOC 1. Spring简介 1.1 框架介绍 框架，是经过验证，具有一定功能的，半成品软件。它的作用有：提高开发效率，增强可重用性，提供编写规范，节约维护成本，解耦底层实现原理。
1.2 Spring介绍 Spring是分层的JavaSE/EE应用full-stack轻量级开源框架，Spring …"><meta property="twitter:domain" content="http://localhost:1313/posts/spring_01_ioc/"><meta property="twitter:url" content="http://localhost:1313/posts/spring_01_ioc/"><meta name=twitter:image content="http://localhost:1313/images/cat.webp"><link rel=canonical href=http://localhost:1313/posts/spring_01_ioc/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.275fedb6f364c8865658bae576d82b514ace973f6a13ed63503a85b20c697453.js integrity="sha256-J1/ttvNkyIZWWLrldtgrUUrOlz9qE+1jUDqFsgxpdFM="></script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://localhost:1313/><img src=/images/cat.webp alt=cat></a></div><div class=nav-title><a class=nav-brand href=http://localhost:1313/>Merthon</a></div><div class=nav-links><div class=nav-link><a href=http://localhost:1313/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=http://localhost:1313/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=http://localhost:1313/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=http://localhost:1313/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/Merthon aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://localhost:1313/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=http://localhost:1313/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=http://localhost:1313/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=http://localhost:1313/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/Merthon><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Spring_01_IOC</h1><small role=doc-subtitle></small><p class=post-date>August 18, 2022</p><ul class=post-tags><li class=post-tag><a href=http://localhost:1313/tags/java>java</a></li><li class=post-tag><a href=http://localhost:1313/tags/%E7%AC%94%E8%AE%B0>笔记</a></li><li class=post-tag><a href=http://localhost:1313/tags/springioc>SpringIOC</a></li></ul></div><div class=post-content><h1 id=spring_01-ioc>Spring_01 IOC</h1><h4 id=1-spring简介>1. Spring简介</h4><h5 id=11-框架介绍>1.1 框架介绍</h5><p>框架，是经过验证，具有一定功能的，半成品软件。它的作用有：提高开发效率，增强可重用性，提供编写规范，节约维护成本，解耦底层实现原理。</p><h5 id=12-spring介绍>1.2 Spring介绍</h5><p>Spring是分层的JavaSE/EE应用full-stack轻量级开源框架，Spring是一个开源容器框架，它集成各类型的工具，通过核心的Beanfactory实现了底层的类的实例化和生命周期的管理。在整个框架中，各类型的功能被抽象成一个个的 Bean，这样就可以实现各种功能的管理，包括动态加载和切面编程。</p><h5 id=13-spring的体系结构>1.3 Spring的体系结构</h5><ul><li>底层是核心容器<ul><li>Bean</li><li>Core</li><li>Context</li><li>SpringEL表达式</li></ul></li><li>中间层技术<ul><li>AOP</li><li>Aspects</li></ul></li><li>应用层技术<ul><li>数据访问和数据继承</li><li>Web集成</li><li>Web实现</li></ul></li><li>基于Test测试</li></ul><h4 id=2-ioc简介>2. IoC简介</h4><h5 id=21-ioc>2.1 IoC</h5><ul><li>IoC（Inversion Of Control）控制反转，Spring反向控制应用程序所需要使用的外部资源</li><li>Spring控制的资源全部放置在Spring容器中，该容器称为IoC容器</li></ul><h5 id=22-耦合和内聚>2.2 耦合和内聚</h5><ul><li><p>耦合（Coupling）：代码书写过程中所使用技术的结合紧密度，用于衡量软件中各个模块之间的互联程度</p></li><li><p>内聚（Cohesion）：代码书写过程中单个模块内部各组成部分间的联系，用于衡量软件中各个功能模块内部的功能联系</p></li><li><p>程序书写的目标：高内聚，低耦合 ，就是同一个模块内的各个元素之间要高度紧密，但是各个模块之间的相互依存度却不要那么紧密</p></li></ul><h4 id=3-ioc配置xml格式>3. IoC配置（XML格式）</h4><h5 id=31-bean>3.1 bean</h5><ul><li><p>名称：bean</p></li><li><p>类型：<strong>标签</strong></p></li><li><p>归属：beans标签</p></li><li><p>作用：定义spring中的资源，受此标签定义的资源将受到spring控制</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;beans&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;bean</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>基本属性：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;beanId&#34;</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;beanName1,beanName2&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;ClassName&#34;</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div><p>​ id：bean的名称，通过id值获取bean</p><p>​ class：bean的类型</p><p>​ name：bean的名称，可以通过name值获取bean，用于多人配合时给bean起别名</p></li></ul><h5 id=32-bean属性scope>3.2 bean属性scope</h5><ul><li><p>名称：scope</p></li><li><p>类型：<strong>属性</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：定义bean的作用范围</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>scope=</span><span style=color:#e6db74>&#34;singleton&#34;</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li><p>取值：</p><ul><li>singleton：设定创建出的对象保存在spring容器中，是一个单例的对象</li><li>prototype：设定创建出的对象保存在spring容器中，是一个非单例的对象</li><li>request、session、application、 websocket ：设定创建出的对象放置在web容器对应的位置</li></ul></li></ul><h5 id=33-bean生命周期>3.3 bean生命周期</h5><ul><li><p>名称：init-method，destroy-method</p></li><li><p>类型：<strong>属性</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：定义bean对象在初始化或销毁时完成的工作</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>init-method=</span><span style=color:#e6db74>&#34;init&#34;</span> <span style=color:#a6e22e>destroy-method=</span><span style=color:#e6db74>&#34;destroy</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li><p>取值：bean对应的类中对应的具体方法名</p></li><li><p>注意事项：</p><ul><li><p>当scope=“singleton”时，spring容器中有且仅有一个对象，init方法在创建容器时仅执行一次</p></li><li><p>当scope=“prototype”时，spring容器要创建同一类型的多个对象，init方法在每个对象创建时均执行一次</p></li><li><p>当scope=“singleton”时，关闭容器会导致bean实例的销毁，调用destroy方法一次</p></li><li><p>当scope=“prototype”时，对象的销毁由垃圾回收机制gc()控制，destroy方法将不会被执行</p></li></ul></li></ul><h5 id=34-bean对象创建方式>3.4 bean对象创建方式</h5><p>(1)factory-bean</p><ul><li><p>名称：factory-bean</p></li><li><p>类型：<strong>属性</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：定义bean对象创建方式，使用静态工厂的形式创建bean，兼容早期遗留系统的升级工作</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;FactoryClassName&#34;</span> <span style=color:#a6e22e>factory-method=</span><span style=color:#e6db74>&#34;factoryMethodName&#34;</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li><p>取值：工厂bean中用于获取对象的静态方法名</p></li><li><p>注意事项：</p><ul><li>class属性必须配置成静态工厂的类名</li></ul></li></ul><p>(2)factory-bean，factory-method</p><ul><li><p>名称：factory-bean，factory-method</p></li><li><p>类型：<strong>属性</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：定义bean对象创建方式，使用实例工厂的形式创建bean，兼容早期遗留系统的升级工作</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>factory-bean=</span><span style=color:#e6db74>&#34;factoryBeanId&#34;</span> <span style=color:#a6e22e>factory-method=</span><span style=color:#e6db74>&#34;factoryMethodName&#34;</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li><p>取值：工厂bean中用于获取对象的实例方法名</p></li><li><p>注意事项：</p><ul><li><p>使用实例工厂创建bean首先需要将实例工厂配置bean，交由spring进行管理</p></li><li><p>factory-bean是实例工厂的beanId</p></li></ul></li></ul><h5 id=35-di>3.5 DI</h5><ul><li><p>IoC（Inversion Of Control）控制翻转，Spring反向控制应用程序所需要使用的外部资源</p></li><li><p>DI（Dependency Injection）依赖注入，应用程序运行依赖的资源由Spring为其提供，资源进入应用程序的方式称为注入</p></li></ul><p>IoC与DI的关系</p><ul><li>IoC与DI是同一件事站在不同角度看待问题</li></ul><h5 id=36-set注入主流>3.6 set注入（主流）</h5><ul><li><p>名称：property</p></li><li><p>类型：<strong>标签</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：使用set方法的形式为bean提供资源</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>&lt;</span>bean<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;</span>property <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span>bean<span style=color:#f92672>&gt;</span>
</span></span></code></pre></div></li><li><p>基本属性：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;propertyName&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;propertyValue&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;beanId&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div></li></ul><p>​ name：对应bean中的属性名，要求该属性必须提供可访问的set方法（严格规范为此名称是set方法对应名称）</p><p>​ value：设定非引用类型属性对应的值，不能与ref同时使用</p><p>​ ref：设定引用类型属性对应bean的id ，不能与value同时使用</p><ul><li>注意：一个bean可以有多个property标签</li></ul><h5 id=37-构造器注入了解>3.7 构造器注入（了解）</h5><ul><li><p>名称：constructor-arg</p></li><li><p>类型：<strong>标签</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：使用构造方法的形式为bean提供资源，兼容早期遗留系统的升级工作</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li><p>基本属性：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;argsName&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;argsValue</span> <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div></li></ul><p>​ name：对应bean中的构造方法所携带的参数名</p><p>​ value：设定非引用类型构造方法参数对应的值，不能与ref同时使用</p><p>其他属性：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>index=</span><span style=color:#e6db74>&#34;arg-index&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;arg-type&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;beanId&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><p>​ ref：设定引用类型构造方法参数对应bean的id ，不能与value同时使用</p><p>​ type ：设定构造方法参数的类型，用于按类型匹配参数或进行类型校验</p><p>​ index ：设定构造方法参数的位置，用于按位置匹配参数，参数index值从0开始计数</p><ul><li>注意：一个bean可以有多个constructor-arg标签</li></ul><h5 id=38-集合类型数据注入>3.8 集合类型数据注入</h5><ul><li><p>名称：array，list，set，map，props</p></li><li><p>类型：<strong>标签</strong></p></li><li><p>归属：property标签 或 constructor-arg标签</p></li><li><p>作用：注入集合数据类型属性</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;list&gt;&lt;/list&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div></li></ul><p>(1)集合类型数据注入——list</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;al&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;list&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;value&gt;</span>itheima<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;value&gt;</span>66666<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/list&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><p>(2)集合类型数据注入——props</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;properties&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;props&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;prop</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>&gt;</span>itheima666<span style=color:#f92672>&lt;/prop&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;prop</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>&#34;value&#34;</span><span style=color:#f92672>&gt;</span>666666<span style=color:#f92672>&lt;/prop&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/props&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><p>(3)集合类型数据注入——array （了解）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;arr&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;array&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;value&gt;</span>123456<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;value&gt;</span>66666<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/array&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><p>(4)集合类型数据注入——set（了解）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span> <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;hs&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;set&gt;</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>&lt;value&gt;</span>itheima<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>&lt;value&gt;</span>66666<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;/set&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><p>(5)集合类型数据注入——map（了解）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;hm&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;map&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;entry</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;itheima66666&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;entry</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>&#34;value&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;6666666666&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/map&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><h5 id=39-使用p命名空间简化配置了解>3.9 使用p命名空间简化配置（了解）</h5><ul><li><p>名称：p:propertyName，p:propertyName-ref</p></li><li><p>类型：<strong>属性</strong></p></li><li><p>归属：bean标签</p></li><li><p>作用：为bean注入属性值</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>p:propertyName=</span><span style=color:#e6db74>&#34;propertyValue&#34;</span> <span style=color:#a6e22e>p:propertyName-ref=</span><span style=color:#e6db74>&#34;beanId&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div></li><li><p>注意：使用p命令空间需要先开启spring对p命令空间的的支持，在beans标签中添加对应空间支持</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>    <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>    <span style=color:#a6e22e>xmlns:p=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/p&#34;</span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans     https://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><p>后续课程中还将开启其他的命名空间，方式同上</p></li><li><p>案例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span> <span style=color:#f92672>&lt;bean</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;userService&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.service.impl.UserServiceImpl&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>p:userDao-ref=</span><span style=color:#e6db74>&#34;userDao&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>p:bookDao-ref=</span><span style=color:#e6db74>&#34;bookDao&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div></li></ul><h5 id=310-spel>3.10 SpEL</h5><ul><li><p>Spring提供了对EL表达式的支持，统一属性注入格式</p></li><li><p>类型：<strong>属性值</strong></p></li><li><p>归属：value属性值</p></li><li><p>作用：为bean注入属性值</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;EL&#34;</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li><p>注意：所有属性值不区分是否引用类型，统一使用value赋值</p></li><li><p>所有格式统一使用 value=“********”</p><ul><li><p>常量 #{10} #{3.14} #{2e5} #{‘itcast’}</p></li><li><p>引用bean #{beanId}</p></li><li><p>引用bean属性 #{beanId.propertyName}</p></li><li><p>引用bean方法 beanId.methodName().method2()</p></li><li><p>引用静态方法 T(java.lang.Math).PI</p></li><li><p>运算符支持 #{3 lt 4 == 4 ge 3}</p></li><li><p>正则表达式支持 #{user.name matches‘[a-z]{6,}’}</p></li><li><p>集合支持 #{likes[3]}</p></li></ul></li><li><p>案例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span> <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;userService&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.service.impl.UserServiceImpl&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;userDao&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;#{userDao}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;#{bookDao}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;num&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;#{666666666}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;version&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;#{&#39;itcast&#39;}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div></li></ul><h5 id=311-properties文件>3.11 properties文件</h5><ul><li><p>Spring提供了读取外部properties文件的机制，使用读取到的数据为bean的属性赋值</p></li><li><p>操作步骤</p><p>1.准备外部properties文件</p><p>2.开启context命名空间支持</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>xmlns:context=&#34;http://www.springframework.org/schema/context&#34;
</span></span></code></pre></div></li></ul><p>​ 3.加载指定的properties文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;classpath:filename.properties&#34;</span><span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><p>​ 4.使用加载的数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;propertyName&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${propertiesName}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><ul><li><p>注意：如果需要加载所有的properties文件，可以使用<code>*.properties</code>表示加载所有的properties文件</p></li><li><p>注意：读取数据使用**${propertiesName}<strong>格式进行，其中</strong>propertiesName**指properties文件中的属性名</p></li></ul><h5 id=312-团队开发>3.12 团队开发</h5><ul><li><p>名称：import</p></li><li><p>类型：<strong>标签</strong></p></li><li><p>归属：beans标签</p></li><li><p>作用：在当前配置文件中导入其他配置文件中的项</p></li><li><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;beans&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;import</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>基本属性：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>“config.xml&#34;/</span><span style=color:#f92672>&gt;</span>
</span></span></code></pre></div></li></ul><p>​ resource：加载的配置文件名</p><ul><li><p>Spring容器加载多个配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;config1.xml&#34;</span>,<span style=color:#e6db74>&#34;config2.xml&#34;</span>);
</span></span></code></pre></div></li><li><p>Spring容器中的bean定义冲突问题</p><ul><li><p>同id的bean，后定义的覆盖先定义的</p></li><li><p>导入配置文件可以理解为将导入的配置文件复制粘贴到对应位置</p></li><li><p>导入配置文件的顺序与位置不同可能会导致最终程序运行结果不同</p></li></ul></li></ul><h5 id=313-applicationcontext>3.13 ApplicationContext</h5><p>1.ApplicationContext是一个接口，提供了访问spring容器的API</p><p>2.ClassPathXmlApplicationContext是一个类，实现了上述功能</p><p>3.ApplicationContext的顶层接口是BeanFactory</p><p>4.BeanFactory定义了bean相关的最基本操作</p><p>5.ApplicationContext在BeanFactory基础上追加了若干新功能</p><p><strong>对比BeanFactory</strong></p><p>1.BeanFactory创建的bean采用延迟加载形式，使用才创建</p><p>2.ApplicationContext创建的bean默认采用立即加载形式</p><p><strong>FileSystemXmlApplicationContext</strong></p><p>可以加载文件系统中任意位置的配置文件，而ClassPathXmlApplicationContext只能加载类路径下的配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Resource res <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathResource(<span style=color:#e6db74>&#34;applicationContext.xml&#34;</span>);
</span></span><span style=display:flex><span>BeanFactory bf <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> XmlBeanFactory(res);
</span></span><span style=display:flex><span>UserService userService <span style=color:#f92672>=</span> (UserService)bf.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;userService&#34;</span>);
</span></span></code></pre></div><h5 id=314-第三方资源配置>3.14 第三方资源配置</h5><ul><li><p>阿里数据源方案Druid</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;dataSource&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driverClassName&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_ioc&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div></li></ul></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div></main><footer class=footer><span>&copy; 2022 Merthon</span>
<span>Made with &#10084;&#65039; Hugo</span></footer></body></html>