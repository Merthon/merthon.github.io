<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:17.5px}</style><title>Django_Part_3</title>
<meta name=description content="从 2 结束的地方开始。继续开发 Web 投票应用程序，并将专注于创建公共界面 – “视图”。
概述 视图是 Django 应用程序中的一种 “类型” 网页，通常提供特定功能并具有特定模板。例如，在博客应用程序中，您可能有以下视图：
Blog homepage （博客主页） – 显示最新的几个条目。 条目 “详细信息” …"><meta name=keywords content='blog,hugo,python,Django'><meta property="og:url" content="https://merthon.github.io/posts/django_part_3/"><meta property="og:type" content="website"><meta property="og:title" content="Django_Part_3"><meta property="og:description" content="从 2 结束的地方开始。继续开发 Web 投票应用程序，并将专注于创建公共界面 – “视图”。
概述 视图是 Django 应用程序中的一种 “类型” 网页，通常提供特定功能并具有特定模板。例如，在博客应用程序中，您可能有以下视图：
Blog homepage （博客主页） – 显示最新的几个条目。 条目 “详细信息” …"><meta property="og:image" content="https://merthon.github.io/images/cat.webp"><meta property="og:image:secure_url" content="https://merthon.github.io/images/cat.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Django_Part_3"><meta name=twitter:description content="从 2 结束的地方开始。继续开发 Web 投票应用程序，并将专注于创建公共界面 – “视图”。
概述 视图是 Django 应用程序中的一种 “类型” 网页，通常提供特定功能并具有特定模板。例如，在博客应用程序中，您可能有以下视图：
Blog homepage （博客主页） – 显示最新的几个条目。 条目 “详细信息” …"><meta property="twitter:domain" content="https://merthon.github.io/posts/django_part_3/"><meta property="twitter:url" content="https://merthon.github.io/posts/django_part_3/"><meta name=twitter:image content="https://merthon.github.io/images/cat.webp"><link rel=canonical href=https://merthon.github.io/posts/django_part_3/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.275fedb6f364c8865658bae576d82b514ace973f6a13ed63503a85b20c697453.js integrity="sha256-J1/ttvNkyIZWWLrldtgrUUrOlz9qE+1jUDqFsgxpdFM="></script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://merthon.github.io/><img src=/images/cat.webp alt=cat></a></div><div class=nav-title><a class=nav-brand href=https://merthon.github.io/>Merthon</a></div><div class=nav-links><div class=nav-link><a href=https://merthon.github.io/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://merthon.github.io/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://merthon.github.io/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=https://merthon.github.io/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/Merthon aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://merthon.github.io/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://merthon.github.io/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://merthon.github.io/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=https://merthon.github.io/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/Merthon><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Django_Part_3</h1><small role=doc-subtitle></small><p class=post-date>February 21, 2025</p><ul class=post-tags><li class=post-tag><a href=https://merthon.github.io/tags/python>python</a></li><li class=post-tag><a href=https://merthon.github.io/tags/django>Django</a></li></ul></div><div class=post-content><p>从 2 结束的地方开始。继续开发 Web 投票应用程序，并将专注于创建公共界面 – “视图”。</p><h2 id=概述> 概述</h2><p>视图是 Django 应用程序中的一种 “类型” 网页，通常提供特定功能并具有特定模板。例如，在博客应用程序中，您可能有以下视图：</p><ul><li>Blog homepage （博客主页） – 显示最新的几个条目。</li><li>条目 “详细信息” 页面 – 单个条目的永久链接页面。</li><li>Comment action （评论作） – 处理向给定条目发布评论
在我们的 poll 应用程序中，我们将有以下四个视图：</li><li>问题 “index” 页面 – 显示最新的几个问题。</li><li>问题 “详细信息” 页面） – 显示问题文本，没有结果，但有一个用于投票的表单。</li><li>问题 “results” 页面 – 显示特定问题的结果。</li><li>Vote action （投票作） – 处理对特定问题中特定选项的投票。
在 Django 中，网页和其他内容由视图交付。每个视图都由一个 Python 函数（或方法，在基于类的视图的情况下）表示。Django 将通过检查请求的 URL 来选择一个视图（准确地说，是 URL 在域名后面的部分）。</li></ul><h2 id=编写更多视图>编写更多视图</h2><p>现在让我们向 polls/views.py 添加更多视图。这些观点略有不同，因为它们需要一个论点：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>detail</span>(request, question_id):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#34;You&#39;re looking at question </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>.&#34;</span> <span style=color:#f92672>%</span> question_id)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>results</span>(request, question_id):
</span></span><span style=display:flex><span>    response <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;You&#39;re looking at the results of question </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>.&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(response <span style=color:#f92672>%</span> question_id)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>vote</span>(request, question_id):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#34;You&#39;re voting on question </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>.&#34;</span> <span style=color:#f92672>%</span> question_id)
</span></span></code></pre></div><p>通过添加以下 path（） 调用，将这些新视图连接到 polls.urls 模块中：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.urls <span style=color:#f92672>import</span> path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> . <span style=color:#f92672>import</span> views
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>urlpatterns <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e># ex: /polls/</span>
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&#34;</span>, views<span style=color:#f92672>.</span>index, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;index&#34;</span>),
</span></span><span style=display:flex><span>    <span style=color:#75715e># ex: /polls/5/</span>
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&lt;int:question_id&gt;/&#34;</span>, views<span style=color:#f92672>.</span>detail, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;detail&#34;</span>),
</span></span><span style=display:flex><span>    <span style=color:#75715e># ex: /polls/5/results/</span>
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&lt;int:question_id&gt;/results/&#34;</span>, views<span style=color:#f92672>.</span>results, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;results&#34;</span>),
</span></span><span style=display:flex><span>    <span style=color:#75715e># ex: /polls/5/vote/</span>
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&lt;int:question_id&gt;/vote/&#34;</span>, views<span style=color:#f92672>.</span>vote, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vote&#34;</span>),
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><h2 id=编写实际执行作的视图>编写实际执行作的视图</h2><p>每个视图负责做以下两件事之一：返回一个包含所请求页面内容的 HttpResponse 对象，或者引发一个异常，比如 Http404。
视图可以从数据库中读取记录，也可以不读取记录。它可以使用 Django 等模板系统——或者第三方 Python 模板系统——也可以不使用。它可以生成 PDF 文件、输出 XML、动态创建 ZIP 文件，使用您想要的任何 Python 库，使用您想要的任何内容。
因为它很方便，让我们使用 Django 自己的数据库 API，我们在 2 中介绍过。这是对新 index（） 视图的一次尝试，该视图根据发布日期显示系统中最新的 5 个投票问题，用逗号分隔：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.http <span style=color:#f92672>import</span> HttpResponse
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Question
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>(request):
</span></span><span style=display:flex><span>    latest_question_list <span style=color:#f92672>=</span> Question<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>order_by(<span style=color:#e6db74>&#34;-pub_date&#34;</span>)[:<span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>    output <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;, &#34;</span><span style=color:#f92672>.</span>join([q<span style=color:#f92672>.</span>question_text <span style=color:#66d9ef>for</span> q <span style=color:#f92672>in</span> latest_question_list])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(output)
</span></span><span style=display:flex><span><span style=color:#75715e># Leave the rest of the views (detail, results, vote) unchanged</span>
</span></span></code></pre></div><p>但是，这里有一个问题：页面的设计在视图中是硬编码的。如果要更改页面的外观，则必须编辑此 Python 代码。因此，让我们使用 Django 的模板系统，通过创建视图可以使用的模板，将设计与 Python 分开。
首先，在 polls 目录中创建一个名为 templates 的目录。Django 将在其中寻找模板。
项目的 TEMPLATES 设置描述了 Django 将如何加载和渲染模板。默认设置文件配置了一个 DjangoTemplates 后端，其 APP_DIRS 选项设置为 True。按照惯例，DjangoTemplates 在每个 INSTALLED_APPS 中查找一个 “templates” 子目录。
刚刚创建的 templates 目录中，创建另一个名为 polls 的目录，并在该目录中创建一个名为 index.html 的文件。换句话说，您的模板应为 polls/templates/polls/index.html。由于 app_directories 模板加载器的工作方式如上所述，你可以在 Django 中将此模板称为 polls/index.html。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{% if latest_question_list %}
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    {% for question in latest_question_list %}
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/polls/{{ question.id }}/&#34;</span>&gt;{{ question.question_text }}&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    {% endfor %}
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>{% else %}
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>p</span>&gt;No polls are available.&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>{% endif %}
</span></span></code></pre></div><p>现在让我们在 <code>polls/views.py</code> 中更新我们的<code>索引</code>视图以使用模板：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.http <span style=color:#f92672>import</span> HttpResponse
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.template <span style=color:#f92672>import</span> loader
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Question
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>(request):
</span></span><span style=display:flex><span>    latest_question_list <span style=color:#f92672>=</span> Question<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>order_by(<span style=color:#e6db74>&#34;-pub_date&#34;</span>)[:<span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>    template <span style=color:#f92672>=</span> loader<span style=color:#f92672>.</span>get_template(<span style=color:#e6db74>&#34;polls/index.html&#34;</span>)
</span></span><span style=display:flex><span>    context <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;latest_question_list&#34;</span>: latest_question_list,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(template<span style=color:#f92672>.</span>render(context, request))
</span></span></code></pre></div><p>该代码加载名为 polls/index.html 的模板，并向其传递一个上下文。上下文是将模板变量名称映射到 Python 对象的字典。
将浏览器指向 “/polls/” 来加载页面，您应该会看到一个项目符号列表，其中包含 Tutorial 2 中的 “What&rsquo;s up” 问题。该链接指向问题的详细信息页面。</p><h3 id=快捷键render>快捷键：<code>render（）</code></h3><p>加载模板、填充上下文并使用渲染模板的结果返回 HttpResponse 对象是一个非常常见的习惯用语。Django 提供了一个快捷方式。这是完整的 index（） 视图，重写了:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># polls/views.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.shortcuts <span style=color:#f92672>import</span> render
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Question
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>(request):
</span></span><span style=display:flex><span>    latest_question_list <span style=color:#f92672>=</span> Question<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>order_by(<span style=color:#e6db74>&#34;-pub_date&#34;</span>)[:<span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>    context <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;latest_question_list&#34;</span>: latest_question_list}
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render(request, <span style=color:#e6db74>&#34;polls/index.html&#34;</span>, context)
</span></span></code></pre></div><p>请注意，一旦我们在所有这些视图中完成了这些，我们就不再需要导入 loader 和 HttpResponse（如果你仍然有 detail、results 和 vote 的存根方法，你会想要保留 HttpResponse）。
render（） 函数将请求对象作为其第一个参数，将模板名称作为其第二个参数，将字典作为其可选的第三个参数。它返回使用给定上下文渲染的给定模板的 HttpResponse 对象。</p><h2 id=引发-404-错误>引发 404 错误</h2><p>现在，让我们处理问题详细信息视图 – 显示给定投票的问题文本的页面。这是视图：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.http <span style=color:#f92672>import</span> Http404
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.shortcuts <span style=color:#f92672>import</span> render
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Question
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>detail</span>(request, question_id):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        question <span style=color:#f92672>=</span> Question<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(pk<span style=color:#f92672>=</span>question_id)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> Question<span style=color:#f92672>.</span>DoesNotExist:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> Http404(<span style=color:#e6db74>&#34;Question does not exist&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render(request, <span style=color:#e6db74>&#34;polls/detail.html&#34;</span>, {<span style=color:#e6db74>&#34;question&#34;</span>: question})
</span></span></code></pre></div><p>这里的新概念：如果不存在具有请求 ID 的问题，则视图会引发 Http404 异常。</p><h3 id=快捷键get_object_or_404>快捷键：<code>get_object_or_404（）</code></h3><p>使用 get（） 并在对象不存在时引发 Http404 是一个非常常见的习惯用法。Django 提供了一个快捷方式。这是重写的 detail（） 视图：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.shortcuts <span style=color:#f92672>import</span> get_object_or_404, render
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Question
</span></span><span style=display:flex><span><span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>detail</span>(request, question_id):
</span></span><span style=display:flex><span>    question <span style=color:#f92672>=</span> get_object_or_404(Question, pk<span style=color:#f92672>=</span>question_id)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render(request, <span style=color:#e6db74>&#34;polls/detail.html&#34;</span>, {<span style=color:#e6db74>&#34;question&#34;</span>: question})
</span></span></code></pre></div><p>还有一个 get_list_or_404（） 函数，其工作方式与 get_object_or_404（） 相同 - 不同之处在于使用 filter（） 而不是 get（）。如果列表为空，它会引发 Http404。</p><h2 id=使用模板系统>使用模板系统</h2><p>回到我们的 poll 应用程序的 detail（） 视图。给定上下文变量问题，polls/detail.html 模板可能如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>h1</span>&gt;{{ question.question_text }}&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>{% for choice in question.choice_set.all %}
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span>&gt;{{ choice.choice_text }}&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>{% endfor %}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ul</span>&gt;
</span></span></code></pre></div><p>模板系统使用点查找语法来访问变量属性。在 {{ question.question_text }} 的例子中，首先 Django 对对象 question 进行字典查找。如果失败，它会尝试属性查找 —— 在这种情况下，这很有效。如果属性查找失败，它将尝试列表索引查找。
方法调用发生在 {% for %} 循环中：question.choice_set.all 被解释为 Python 代码 question.choice_set.all（），它返回 Choice 对象的可迭代对象，适合在 {% for %} 标签中使用。</p><h2 id=删除模板中的硬编码-url>删除模板中的硬编码 URL</h2><p>当我们在 polls/index.html 模板中编写问题的链接时，该链接部分被硬编码，如下所示：
<code>&lt;li>&lt;a href="/polls/{{ question.id }}/">{{ question.question_text }}&lt;/a>&lt;/li></code>
这种硬编码、紧密耦合的方法的问题在于，在具有大量模板的项目中更改 URL 变得具有挑战性。但是，由于您在 polls.urls 模块的 path（） 函数中定义了 name 参数，因此您可以使用 {% url %} 模板标签来消除对 url 配置中定义的特定 URL 路径的依赖：
<code>&lt;li>&lt;a href="{% url 'detail' question.id %}">{{ question.question_text }}&lt;/a>&lt;/li></code></p><h2 id=命名空间-url-名称>命名空间 URL 名称</h2><p>项目只有一个应用程序，即 polls。在实际的 Django 项目中，可能有 5 个、10 个、20 个或更多应用程序。Django 如何区分它们之间的 URL 名称？例如，polls 应用程序具有详细信息视图，博客的同一项目中的应用程序也可能具有详细信息视图。如何让 Django 知道在使用 {% url %} 模板标签时为 url 创建哪个应用视图呢？
答案是向你的 URLconf 添加命名空间。在 polls/urls.py 文件中，添加一个 app_name 来设置应用程序命名空间：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.urls <span style=color:#f92672>import</span> path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> . <span style=color:#f92672>import</span> views
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;polls&#34;</span>
</span></span><span style=display:flex><span>urlpatterns <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&#34;</span>, views<span style=color:#f92672>.</span>index, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;index&#34;</span>),
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&lt;int:question_id&gt;/&#34;</span>, views<span style=color:#f92672>.</span>detail, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;detail&#34;</span>),
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&lt;int:question_id&gt;/results/&#34;</span>, views<span style=color:#f92672>.</span>results, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;results&#34;</span>),
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#34;&lt;int:question_id&gt;/vote/&#34;</span>, views<span style=color:#f92672>.</span>vote, name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vote&#34;</span>),
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>现在将您的 <code>polls/index.html</code> 模板从：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{% url &#39;detail&#39; question.id %}&#34;</span>&gt;{{ question.question_text }}&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span></code></pre></div><p>要指向 Namespaced Detail 视图：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{% url &#39;polls:detail&#39; question.id %}&#34;</span>&gt;{{ question.question_text }}&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span></code></pre></div></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div><aside class=post-toc><nav id=toc><nav id=TableOfContents><ul><li><ul><li><a href=#概述> 概述</a></li><li><a href=#编写更多视图>编写更多视图</a></li><li><a href=#编写实际执行作的视图>编写实际执行作的视图</a><ul><li><a href=#快捷键render>快捷键：<code>render（）</code></a></li></ul></li><li><a href=#引发-404-错误>引发 404 错误</a><ul><li><a href=#快捷键get_object_or_404>快捷键：<code>get_object_or_404（）</code></a></li></ul></li><li><a href=#使用模板系统>使用模板系统</a></li><li><a href=#删除模板中的硬编码-url>删除模板中的硬编码 URL</a></li><li><a href=#命名空间-url-名称>命名空间 URL 名称</a></li></ul></li></ul></nav></nav></aside></main><footer class=footer><span>&copy; 2025 Merthon</span>
<span>Made with &#10084;&#65039; Hugo</span></footer></body></html>