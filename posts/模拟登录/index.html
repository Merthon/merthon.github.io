<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:17.5px}</style><title>模拟登录</title>
<meta name=description content="基本原理 通过模拟用户在浏览器中执行的登录操作，获取并维持用户的登录状态，从而访问需要身份认证的网页或数据。
发送登录请求 用户在浏览器中提交登录表单时，会向服务器发送一个 HTTP 请求，这个请求通常是一个 POST 请求，包含了用户输入的 用户名 和 密码，以及其他一些必要的字段（例如：CSRF token、验证码 …"><meta name=keywords content='blog,hugo,Python,爬虫,模拟登录'><meta property="og:url" content="http://localhost:1313/posts/%E6%A8%A1%E6%8B%9F%E7%99%BB%E5%BD%95/"><meta property="og:type" content="website"><meta property="og:title" content="模拟登录"><meta property="og:description" content="基本原理 通过模拟用户在浏览器中执行的登录操作，获取并维持用户的登录状态，从而访问需要身份认证的网页或数据。
发送登录请求 用户在浏览器中提交登录表单时，会向服务器发送一个 HTTP 请求，这个请求通常是一个 POST 请求，包含了用户输入的 用户名 和 密码，以及其他一些必要的字段（例如：CSRF token、验证码 …"><meta property="og:image" content="http://localhost:1313/images/cat.webp"><meta property="og:image:secure_url" content="http://localhost:1313/images/cat.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="模拟登录"><meta name=twitter:description content="基本原理 通过模拟用户在浏览器中执行的登录操作，获取并维持用户的登录状态，从而访问需要身份认证的网页或数据。
发送登录请求 用户在浏览器中提交登录表单时，会向服务器发送一个 HTTP 请求，这个请求通常是一个 POST 请求，包含了用户输入的 用户名 和 密码，以及其他一些必要的字段（例如：CSRF token、验证码 …"><meta property="twitter:domain" content="http://localhost:1313/posts/%E6%A8%A1%E6%8B%9F%E7%99%BB%E5%BD%95/"><meta property="twitter:url" content="http://localhost:1313/posts/%E6%A8%A1%E6%8B%9F%E7%99%BB%E5%BD%95/"><meta name=twitter:image content="http://localhost:1313/images/cat.webp"><link rel=canonical href=http://localhost:1313/posts/%E6%A8%A1%E6%8B%9F%E7%99%BB%E5%BD%95/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.275fedb6f364c8865658bae576d82b514ace973f6a13ed63503a85b20c697453.js integrity="sha256-J1/ttvNkyIZWWLrldtgrUUrOlz9qE+1jUDqFsgxpdFM="></script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://localhost:1313/><img src=/images/cat.webp alt=cat></a></div><div class=nav-title><a class=nav-brand href=http://localhost:1313/>Merthon</a></div><div class=nav-links><div class=nav-link><a href=http://localhost:1313/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=http://localhost:1313/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=http://localhost:1313/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=http://localhost:1313/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/Merthon aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://localhost:1313/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=http://localhost:1313/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=http://localhost:1313/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=http://localhost:1313/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/Merthon><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>模拟登录</h1><small role=doc-subtitle></small><p class=post-date>January 9, 2025</p><ul class=post-tags><li class=post-tag><a href=http://localhost:1313/tags/python>Python</a></li><li class=post-tag><a href=http://localhost:1313/tags/%E7%88%AC%E8%99%AB>爬虫</a></li><li class=post-tag><a href=http://localhost:1313/tags/%E6%A8%A1%E6%8B%9F%E7%99%BB%E5%BD%95>模拟登录</a></li></ul></div><div class=post-content><h1 id=基本原理>基本原理</h1><p>通过模拟用户在浏览器中执行的登录操作，获取并维持用户的登录状态，从而访问需要身份认证的网页或数据。</p><h2 id=发送登录请求>发送登录请求</h2><p>用户在浏览器中提交登录表单时，会向服务器发送一个 HTTP 请求，这个请求通常是一个 <strong>POST</strong> 请求，包含了用户输入的 <strong>用户名</strong> 和 <strong>密码</strong>，以及其他一些必要的字段（例如：CSRF token、验证码等）。</p><h2 id=认证与验证>认证与验证</h2><p>服务器收到登录请求后，会进行认证与验证，主要包括：</p><ul><li><strong>检查用户名和密码是否正确</strong>：服务器会对比数据库中的用户数据，验证用户名和密码是否匹配。</li><li><strong>CSRF token 检查</strong>：如果存在 CSRF 防护，服务器会验证请求中包含的 CSRF token 是否有效。这个 token 是防止跨站请求伪造攻击的标记。</li></ul><h2 id=设置-cookie-或-token>设置 Cookie 或 Token</h2><p>如果登录信息正确，服务器会在响应中设置一个 <strong>Session cookie</strong> 或者返回一个 <strong>JWT（JSON Web Token）</strong>。这些都是用来表示用户身份的认证信息。</p><ul><li><strong>Session cookie</strong>：通常在服务器端生成一个 session ID，并通过 cookie 返回给客户端。该 session ID 用于标识用户的会话，服务器会将会话信息（如用户身份）保存在内存或数据库中。</li><li><strong>JWT</strong>：在某些情况下，服务器会返回一个 JWT，客户端需要在后续请求中带上这个 token，来证明自己已经登录。</li></ul><h2 id=维护登录状态>维护登录状态</h2><p>登录成功后，为了模拟用户持续登录的状态，爬虫需要维护登录过程中获取到的 <strong>Session</strong> 或 <strong>Cookie</strong>。通过在后续的 HTTP 请求中附带这些认证信息，爬虫可以继续访问需要登录权限的页面。</p><ul><li><strong>保持会话（Session）</strong>：通过 HTTP 请求中的 <strong>Cookie</strong>，爬虫可以维持与服务器的会话，这样就可以重复使用相同的登录状态进行多次请求。</li><li><strong>使用 Token</strong>：如果使用的是 JWT 等 token 认证方式，爬虫则需要在后续请求的 <strong>Authorization header</strong> 中附带 token。</li></ul><h2 id=访问受保护的资源>访问受保护的资源</h2><p>登录成功后，用户通常会被重定向到一个主页或其他受保护的页面。此时，爬虫只需要带上保存的 <strong>Cookie</strong> 或 <strong>Token</strong>，就可以访问这些页面。</p><ul><li><strong>带 Cookie 访问</strong>：使用会话对象（如 <code>requests.Session()</code>）模拟浏览器行为，自动在后续请求中带上正确的 cookies。</li><li><strong>带 Token 访问</strong>：在请求头中加入 <code>Authorization: Bearer &lt;token></code> 来模拟带 Token 的请求。</li></ul></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div><aside class=post-toc><nav id=toc><nav id=TableOfContents><ul><li><a href=#基本原理>基本原理</a><ul><li><a href=#发送登录请求>发送登录请求</a></li><li><a href=#认证与验证>认证与验证</a></li><li><a href=#设置-cookie-或-token>设置 Cookie 或 Token</a></li><li><a href=#维护登录状态>维护登录状态</a></li><li><a href=#访问受保护的资源>访问受保护的资源</a></li></ul></li></ul></nav></nav></aside></main><footer class=footer><span>&copy; 2025 Merthon</span>
<span>Made with &#10084;&#65039; Hugo</span></footer></body></html>