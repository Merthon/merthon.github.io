<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:17.5px}</style><title>网站技术分析</title>
<meta name=description content="使用Python爬取网站信息，主要是查看网站使用了那些技术栈，用到requests，bs4。效果就是将爬取下来的数据放到SQLite（此举是进行缓存，比如之前搜索过的会直接出现），然后在以表格的格式存取数据，方便查阅。
import requests import json import re import sys …"><meta name=keywords content='blog,hugo,爬虫,Python'><meta property="og:url" content="https://merthon.github.io/posts/%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/"><meta property="og:type" content="website"><meta property="og:title" content="网站技术分析"><meta property="og:description" content="使用Python爬取网站信息，主要是查看网站使用了那些技术栈，用到requests，bs4。效果就是将爬取下来的数据放到SQLite（此举是进行缓存，比如之前搜索过的会直接出现），然后在以表格的格式存取数据，方便查阅。
import requests import json import re import sys …"><meta property="og:image" content="https://merthon.github.io/images/cat.webp"><meta property="og:image:secure_url" content="https://merthon.github.io/images/cat.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="网站技术分析"><meta name=twitter:description content="使用Python爬取网站信息，主要是查看网站使用了那些技术栈，用到requests，bs4。效果就是将爬取下来的数据放到SQLite（此举是进行缓存，比如之前搜索过的会直接出现），然后在以表格的格式存取数据，方便查阅。
import requests import json import re import sys …"><meta property="twitter:domain" content="https://merthon.github.io/posts/%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/"><meta property="twitter:url" content="https://merthon.github.io/posts/%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/"><meta name=twitter:image content="https://merthon.github.io/images/cat.webp"><link rel=canonical href=https://merthon.github.io/posts/%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.275fedb6f364c8865658bae576d82b514ace973f6a13ed63503a85b20c697453.js integrity="sha256-J1/ttvNkyIZWWLrldtgrUUrOlz9qE+1jUDqFsgxpdFM="></script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://merthon.github.io/><img src=/images/cat.webp alt=cat></a></div><div class=nav-title><a class=nav-brand href=https://merthon.github.io/>Merthon</a></div><div class=nav-links><div class=nav-link><a href=https://merthon.github.io/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://merthon.github.io/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=https://merthon.github.io/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=https://merthon.github.io/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/Merthon aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://merthon.github.io/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://merthon.github.io/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=https://merthon.github.io/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=https://merthon.github.io/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/Merthon><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>网站技术分析</h1><small role=doc-subtitle></small><p class=post-date>August 5, 2025</p><ul class=post-tags><li class=post-tag><a href=https://merthon.github.io/tags/%E7%88%AC%E8%99%AB>爬虫</a></li><li class=post-tag><a href=https://merthon.github.io/tags/python>Python</a></li></ul></div><div class=post-content><p>使用Python爬取网站信息，主要是查看网站使用了那些技术栈，用到requests，bs4。效果就是将爬取下来的数据放到SQLite（此举是进行缓存，比如之前搜索过的会直接出现），然后在以表格的格式存取数据，方便查阅。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>import</span> requests
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sqlite3
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> csv
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> bs4 <span style=color:#f92672>import</span> BeautifulSoup
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> urllib.parse <span style=color:#f92672>import</span> urlparse
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime, timedelta
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TechDetectorWithCache</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, cache_file<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tech_cache.db&#39;</span>, cache_hours<span style=color:#f92672>=</span><span style=color:#ae81ff>24</span>):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>headers <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;User-Agent&#39;</span>: <span style=color:#e6db74>&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36&#39;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>cache_file <span style=color:#f92672>=</span> cache_file
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>cache_hours <span style=color:#f92672>=</span> cache_hours
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>init_cache()
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检测规则（保持原有规则不变）</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>rules <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#75715e># JavaScript 框架/库</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;JavaScript 框架/库&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;React&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;react\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;react\.min\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;react-dom&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;data-react&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__REACT_DEVTOOLS_GLOBAL_HOOK__&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;dom&#39;</span>: [<span style=color:#e6db74>&#39;[data-reactroot]&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Vue.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;vue\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;vue\.min\.js&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;data-v-&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;v-if&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;v-for&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;dom&#39;</span>: [<span style=color:#e6db74>&#39;[data-v-&#39;</span>, <span style=color:#e6db74>&#39;[v-cloak]&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Angular&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;angular\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;@angular&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;ng-&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;data-ng-&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;dom&#39;</span>: [<span style=color:#e6db74>&#39;[ng-app]&#39;</span>, <span style=color:#e6db74>&#39;[ng-controller]&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;jQuery&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;jquery\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;jquery\.min\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;jquery-\d+&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;\$\(&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;jQuery\(&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Next.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_next/static&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__NEXT_DATA__&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_next/static&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Nuxt.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_nuxt/&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__NUXT__&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_nuxt/&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Svelte&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;svelte&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_app/immutable&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;svelte-&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__svelte&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Alpine.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;alpine\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;alpinejs&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;x-data&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;x-show&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;x-if&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># CSS 框架</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;CSS 框架&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Bootstrap&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;bootstrap\.css&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;bootstrap\.min\.css&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;class=&#34;.*?btn.*?&#34;&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;class=&#34;.*?container.*?&#34;&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Tailwind CSS&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;tailwind&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;class=&#34;.*?(flex|grid|text-|bg-|p-|m-)&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Bulma&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;bulma&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;class=&#34;.*?button.*?&#34;&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;class=&#34;.*?column.*?&#34;&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Foundation&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;foundation&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;class=&#34;.*?foundation.*?&#34;&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;自定义CSS&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;style\.css&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;main\.css&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;custom\.css&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;app\.css&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;&lt;style[^&gt;]*&gt;(?!.*?(bootstrap|tailwind|bulma|foundation))&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># UI 组件库</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;UI 组件库&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Ant Design&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;antd&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;ant-&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__antd&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Element UI&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;element-ui&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;el-&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Material-UI&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;material-ui&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;@mui&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;MuiThemeProvider&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;makeStyles&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Vuetify&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;vuetify&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;v-application&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;vuetify&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># CMS</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;CMS&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;WordPress&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;meta&#39;</span>: [{<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;generator&#39;</span>, <span style=color:#e6db74>&#39;content&#39;</span>: <span style=color:#e6db74>&#39;WordPress&#39;</span>}],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;wp-content&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;wp-includes&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Powered-By&#39;</span>: <span style=color:#e6db74>&#39;WordPress&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Drupal&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;meta&#39;</span>: [{<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;generator&#39;</span>, <span style=color:#e6db74>&#39;content&#39;</span>: <span style=color:#e6db74>&#39;Drupal&#39;</span>}],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;Drupal\.settings&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;sites/default&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Joomla&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;meta&#39;</span>: [{<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;generator&#39;</span>, <span style=color:#e6db74>&#39;content&#39;</span>: <span style=color:#e6db74>&#39;Joomla&#39;</span>}],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;joomla&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;com_content&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Shopify&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;Shopify\.theme&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;shopify_pay&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;cdn\.shopify\.com&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Hexo&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;meta&#39;</span>: [{<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;generator&#39;</span>, <span style=color:#e6db74>&#39;content&#39;</span>: <span style=color:#e6db74>&#39;Hexo&#39;</span>}],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;hexo&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># 后端技术</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;后端技术&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;PHP&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Powered-By&#39;</span>: <span style=color:#e6db74>&#39;PHP&#39;</span>},
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;PHPSESSID&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;\.php&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;ASP.NET&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Powered-By&#39;</span>: <span style=color:#e6db74>&#39;ASP.NET&#39;</span>},
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__VIEWSTATE&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__EVENTVALIDATION&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Django&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;csrfmiddlewaretoken&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;django&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Frame-Options&#39;</span>: <span style=color:#e6db74>&#39;DENY&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Laravel&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;laravel_session&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_token&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;laravel&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Ruby on Rails&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;csrf-token&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;rails&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Powered-By&#39;</span>: <span style=color:#e6db74>&#39;Phusion Passenger&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Express.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Powered-By&#39;</span>: <span style=color:#e6db74>&#39;Express&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Spring Boot&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Application-Context&#39;</span>: <span style=color:#e6db74>&#39;application&#39;</span>},
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;spring&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;jsessionid&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Node.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;X-Powered-By&#39;</span>: <span style=color:#e6db74>&#39;Express&#39;</span>},
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;node_modules&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># 服务器</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;服务器&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Apache&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;Server&#39;</span>: <span style=color:#e6db74>&#39;Apache&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Nginx&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;Server&#39;</span>: <span style=color:#e6db74>&#39;nginx&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Cloudflare&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;Server&#39;</span>: <span style=color:#e6db74>&#39;cloudflare&#39;</span>, <span style=color:#e6db74>&#39;CF-RAY&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>}
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;IIS&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;headers&#39;</span>: {<span style=color:#e6db74>&#39;Server&#39;</span>: <span style=color:#e6db74>&#39;Microsoft-IIS&#39;</span>}
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># 分析工具</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;分析工具&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Google Analytics&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;google-analytics\.com&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;gtag\(&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;googletagmanager&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;UA-\d+-\d+&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;G-[A-Z0-9]+&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Baidu Analytics&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;hm\.baidu\.com&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_hmt\.push&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Adobe Analytics&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;omniture&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;adobe&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;s_account&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># 其他工具</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;其他工具&#39;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;GSAP&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;gsap&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;greensock&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;TweenMax&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;TweenLite&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;TweenMax&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;gsap&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;ScrollTrigger&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;TimelineMax&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Core.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;core-js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;corejs&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;core-js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__core-js_shared__&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Three.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;three\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;three\.min\.js&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;THREE\.&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;WebGLRenderer&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;D3.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;d3\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;d3\.min\.js&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;d3\.&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;__d3_version__&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Chart.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;chart\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;chartjs&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;Chart\.&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Font Awesome&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;font-awesome&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;fontawesome&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;fa-&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;fas &#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;far &#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Swiper&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;swiper&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;swiper&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;AOS&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;aos\.js&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;css&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;aos\.css&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Lottie&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;lottie&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;bodymovin&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;lottie-&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;bodymovin&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Framer Motion&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;framer-motion&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;framer-motion&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Intersection Observer&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;IntersectionObserver&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;intersectionObserver&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Lodash&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;lodash\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;lodash\.min\.js&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;_\.&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;lodash&#39;</span>]
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;Moment.js&#39;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;scripts&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;moment\.js&#39;</span>, <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;moment\.min\.js&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;html&#39;</span>: [<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;moment\(&#39;</span>]
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>init_cache</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;初始化缓存数据库&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        conn <span style=color:#f92672>=</span> sqlite3<span style=color:#f92672>.</span>connect(self<span style=color:#f92672>.</span>cache_file)
</span></span><span style=display:flex><span>        cursor <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            CREATE TABLE IF NOT EXISTS tech_cache (
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                url TEXT PRIMARY KEY,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                data TEXT,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                timestamp TEXT
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            )
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#39;&#39;&#39;</span>)
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_from_cache</span>(self, url):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;从缓存获取数据&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        conn <span style=color:#f92672>=</span> sqlite3<span style=color:#f92672>.</span>connect(self<span style=color:#f92672>.</span>cache_file)
</span></span><span style=display:flex><span>        cursor <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#39;SELECT data, timestamp FROM tech_cache WHERE url = ?&#39;</span>, (url,))
</span></span><span style=display:flex><span>        result <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchone()
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> result:
</span></span><span style=display:flex><span>            data, timestamp <span style=color:#f92672>=</span> result
</span></span><span style=display:flex><span>            cache_time <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>fromisoformat(timestamp)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> datetime<span style=color:#f92672>.</span>now() <span style=color:#f92672>-</span> cache_time <span style=color:#f92672>&lt;</span> timedelta(hours<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>cache_hours):
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> json<span style=color:#f92672>.</span>loads(data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>save_to_cache</span>(self, url, data):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;保存数据到缓存&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        conn <span style=color:#f92672>=</span> sqlite3<span style=color:#f92672>.</span>connect(self<span style=color:#f92672>.</span>cache_file)
</span></span><span style=display:flex><span>        cursor <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            INSERT OR REPLACE INTO tech_cache (url, data, timestamp)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            VALUES (?, ?, ?)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#39;&#39;&#39;</span>, (url, json<span style=color:#f92672>.</span>dumps(data), datetime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>isoformat()))
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>detect</span>(self, url, use_cache<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;检测网站技术栈&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> url<span style=color:#f92672>.</span>startswith((<span style=color:#e6db74>&#39;http://&#39;</span>, <span style=color:#e6db74>&#39;https://&#39;</span>)):
</span></span><span style=display:flex><span>            url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;https://&#39;</span> <span style=color:#f92672>+</span> url
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 尝试从缓存获取</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> use_cache:
</span></span><span style=display:flex><span>            cached_data <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>get_from_cache(url)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> cached_data:
</span></span><span style=display:flex><span>                cached_data[<span style=color:#e6db74>&#39;from_cache&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> cached_data
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;正在检测: </span><span style=color:#e6db74>{</span>url<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            response <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(url, headers<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>headers, timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>            response<span style=color:#f92672>.</span>raise_for_status()
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            soup <span style=color:#f92672>=</span> BeautifulSoup(response<span style=color:#f92672>.</span>text, <span style=color:#e6db74>&#39;html.parser&#39;</span>)
</span></span><span style=display:flex><span>            result <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;url&#39;</span>: url,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;status&#39;</span>: <span style=color:#e6db74>&#39;success&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;timestamp&#39;</span>: datetime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74> %H:%M:%S&#39;</span>),
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;from_cache&#39;</span>: <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># 按分类检测</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> category, techs <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>rules<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> tech_name, rules <span style=color:#f92672>in</span> techs<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>_check_tech(response, soup, rules):
</span></span><span style=display:flex><span>                        result[category] <span style=color:#f92672>=</span> tech_name
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#75715e># 保存到缓存</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> use_cache:
</span></span><span style=display:flex><span>                self<span style=color:#f92672>.</span>save_to_cache(url, result)
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> result
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>            error_result <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;url&#39;</span>: url,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;status&#39;</span>: <span style=color:#e6db74>&#39;error&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;error&#39;</span>: str(e),
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;timestamp&#39;</span>: datetime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74> %H:%M:%S&#39;</span>),
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;from_cache&#39;</span>: <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> error_result
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_check_tech</span>(self, response, soup, rules):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;检查是否使用了某项技术&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检查HTTP头</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;headers&#39;</span> <span style=color:#f92672>in</span> rules:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> header, value <span style=color:#f92672>in</span> rules[<span style=color:#e6db74>&#39;headers&#39;</span>]<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> header <span style=color:#f92672>in</span> response<span style=color:#f92672>.</span>headers:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> value:  <span style=color:#75715e># 如果value为空，只检查header存在</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> value<span style=color:#f92672>.</span>lower() <span style=color:#f92672>in</span> response<span style=color:#f92672>.</span>headers[header]<span style=color:#f92672>.</span>lower():
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检查HTML内容</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;html&#39;</span> <span style=color:#f92672>in</span> rules:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> pattern <span style=color:#f92672>in</span> rules[<span style=color:#e6db74>&#39;html&#39;</span>]:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> re<span style=color:#f92672>.</span>search(pattern, response<span style=color:#f92672>.</span>text, re<span style=color:#f92672>.</span>IGNORECASE):
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检查脚本标签</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;scripts&#39;</span> <span style=color:#f92672>in</span> rules:
</span></span><span style=display:flex><span>            scripts <span style=color:#f92672>=</span> soup<span style=color:#f92672>.</span>find_all(<span style=color:#e6db74>&#39;script&#39;</span>, src<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> script <span style=color:#f92672>in</span> scripts:
</span></span><span style=display:flex><span>                src <span style=color:#f92672>=</span> script<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;src&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> pattern <span style=color:#f92672>in</span> rules[<span style=color:#e6db74>&#39;scripts&#39;</span>]:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> re<span style=color:#f92672>.</span>search(pattern, src, re<span style=color:#f92672>.</span>IGNORECASE):
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检查CSS链接</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;css&#39;</span> <span style=color:#f92672>in</span> rules:
</span></span><span style=display:flex><span>            links <span style=color:#f92672>=</span> soup<span style=color:#f92672>.</span>find_all(<span style=color:#e6db74>&#39;link&#39;</span>, rel<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;stylesheet&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> link <span style=color:#f92672>in</span> links:
</span></span><span style=display:flex><span>                href <span style=color:#f92672>=</span> link<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;href&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> pattern <span style=color:#f92672>in</span> rules[<span style=color:#e6db74>&#39;css&#39;</span>]:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> re<span style=color:#f92672>.</span>search(pattern, href, re<span style=color:#f92672>.</span>IGNORECASE):
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检查DOM元素</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;dom&#39;</span> <span style=color:#f92672>in</span> rules:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> selector <span style=color:#f92672>in</span> rules[<span style=color:#e6db74>&#39;dom&#39;</span>]:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> soup<span style=color:#f92672>.</span>select(selector):
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 检查Meta标签</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;meta&#39;</span> <span style=color:#f92672>in</span> rules:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> meta_rule <span style=color:#f92672>in</span> rules[<span style=color:#e6db74>&#39;meta&#39;</span>]:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> soup<span style=color:#f92672>.</span>find(<span style=color:#e6db74>&#39;meta&#39;</span>, attrs<span style=color:#f92672>=</span>meta_rule):
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>save_to_csv</span>(self, results, filename<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;保存结果到CSV文件&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> filename:
</span></span><span style=display:flex><span>            timestamp <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%Y%m</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>_%H%M%S&#39;</span>)
</span></span><span style=display:flex><span>            filename <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;tech_detection_</span><span style=color:#e6db74>{</span>timestamp<span style=color:#e6db74>}</span><span style=color:#e6db74>.csv&#39;</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 定义CSV列</span>
</span></span><span style=display:flex><span>        fieldnames <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;URL&#39;</span>, <span style=color:#e6db74>&#39;状态&#39;</span>, <span style=color:#e6db74>&#39;JavaScript框架/库&#39;</span>, <span style=color:#e6db74>&#39;CSS框架&#39;</span>, <span style=color:#e6db74>&#39;UI组件库&#39;</span>, 
</span></span><span style=display:flex><span>                     <span style=color:#e6db74>&#39;CMS&#39;</span>, <span style=color:#e6db74>&#39;后端技术&#39;</span>, <span style=color:#e6db74>&#39;服务器&#39;</span>, <span style=color:#e6db74>&#39;分析工具&#39;</span>, <span style=color:#e6db74>&#39;其他工具&#39;</span>, 
</span></span><span style=display:flex><span>                     <span style=color:#e6db74>&#39;检测时间&#39;</span>, <span style=color:#e6db74>&#39;缓存状态&#39;</span>, <span style=color:#e6db74>&#39;错误信息&#39;</span>]
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> open(filename, <span style=color:#e6db74>&#39;w&#39;</span>, newline<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>) <span style=color:#66d9ef>as</span> csvfile:
</span></span><span style=display:flex><span>            writer <span style=color:#f92672>=</span> csv<span style=color:#f92672>.</span>DictWriter(csvfile, fieldnames<span style=color:#f92672>=</span>fieldnames)
</span></span><span style=display:flex><span>            writer<span style=color:#f92672>.</span>writeheader()
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> result <span style=color:#f92672>in</span> results:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> result[<span style=color:#e6db74>&#39;status&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;error&#39;</span>:
</span></span><span style=display:flex><span>                    row <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;URL&#39;</span>: result[<span style=color:#e6db74>&#39;url&#39;</span>],
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;状态&#39;</span>: <span style=color:#e6db74>&#39;检测失败&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;JavaScript框架/库&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;CSS框架&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;UI组件库&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;CMS&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;后端技术&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;服务器&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;分析工具&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;其他工具&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;检测时间&#39;</span>: result[<span style=color:#e6db74>&#39;timestamp&#39;</span>],
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;缓存状态&#39;</span>: <span style=color:#e6db74>&#39;缓存&#39;</span> <span style=color:#66d9ef>if</span> result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;from_cache&#39;</span>) <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#39;实时&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;错误信息&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    row <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;URL&#39;</span>: result[<span style=color:#e6db74>&#39;url&#39;</span>],
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;状态&#39;</span>: <span style=color:#e6db74>&#39;成功&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;JavaScript框架/库&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;JavaScript 框架/库&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;CSS框架&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;CSS 框架&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;UI组件库&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;UI 组件库&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;CMS&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;CMS&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;后端技术&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;后端技术&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;服务器&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;服务器&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;分析工具&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;分析工具&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;其他工具&#39;</span>: result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;其他工具&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>),
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;检测时间&#39;</span>: result[<span style=color:#e6db74>&#39;timestamp&#39;</span>],
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;缓存状态&#39;</span>: <span style=color:#e6db74>&#39;缓存&#39;</span> <span style=color:#66d9ef>if</span> result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;from_cache&#39;</span>) <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#39;实时&#39;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#39;错误信息&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                writer<span style=color:#f92672>.</span>writerow(row)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;结果已保存到: </span><span style=color:#e6db74>{</span>filename<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> filename
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>display_console</span>(self, results):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;在控制台简单显示结果&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>检测结果 (</span><span style=color:#e6db74>{</span>len(results)<span style=color:#e6db74>}</span><span style=color:#e6db74> 个网站):&#34;</span>)
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;=&#34;</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i, result <span style=color:#f92672>in</span> enumerate(results, <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>            cache_status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;缓存&#34;</span> <span style=color:#66d9ef>if</span> result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;from_cache&#39;</span>) <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;实时&#34;</span>
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>. </span><span style=color:#e6db74>{</span>result[<span style=color:#e6db74>&#39;url&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;   状态: </span><span style=color:#e6db74>{</span>result[<span style=color:#e6db74>&#39;status&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>{</span>cache_status<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>)
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> result[<span style=color:#e6db74>&#39;status&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;error&#39;</span>:
</span></span><span style=display:flex><span>                print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;   错误: </span><span style=color:#e6db74>{</span>result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                <span style=color:#75715e># 只显示检测到的技术</span>
</span></span><span style=display:flex><span>                detected <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>                categories <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;JavaScript 框架/库&#39;</span>, <span style=color:#e6db74>&#39;CSS 框架&#39;</span>, <span style=color:#e6db74>&#39;UI 组件库&#39;</span>, <span style=color:#e6db74>&#39;CMS&#39;</span>, 
</span></span><span style=display:flex><span>                             <span style=color:#e6db74>&#39;后端技术&#39;</span>, <span style=color:#e6db74>&#39;服务器&#39;</span>, <span style=color:#e6db74>&#39;分析工具&#39;</span>, <span style=color:#e6db74>&#39;其他工具&#39;</span>]
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> category <span style=color:#f92672>in</span> categories:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> category <span style=color:#f92672>in</span> result:
</span></span><span style=display:flex><span>                        detected<span style=color:#f92672>.</span>append(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>category<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>{</span>result[category]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> detected:
</span></span><span style=display:flex><span>                    print(<span style=color:#e6db74>&#34;   检测到的技术:&#34;</span>)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>for</span> tech <span style=color:#f92672>in</span> detected:
</span></span><span style=display:flex><span>                        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;     - </span><span style=color:#e6db74>{</span>tech<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    print(<span style=color:#e6db74>&#34;   未检测到已知技术&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>clear_cache</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;清空缓存&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        conn <span style=color:#f92672>=</span> sqlite3<span style=color:#f92672>.</span>connect(self<span style=color:#f92672>.</span>cache_file)
</span></span><span style=display:flex><span>        cursor <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#39;DELETE FROM tech_cache&#39;</span>)
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;缓存已清空&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>show_cache_stats</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;显示缓存统计&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        conn <span style=color:#f92672>=</span> sqlite3<span style=color:#f92672>.</span>connect(self<span style=color:#f92672>.</span>cache_file)
</span></span><span style=display:flex><span>        cursor <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#39;SELECT COUNT(*) FROM tech_cache&#39;</span>)
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchone()[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        conn<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;缓存中共有 </span><span style=color:#e6db74>{</span>count<span style=color:#e6db74>}</span><span style=color:#e6db74> 条记录&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(description<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;网站技术栈检测器（生成CSV表格）&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;urls&#39;</span>, nargs<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;*&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;要检测的网站URL（可以是多个）&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--no-cache&#39;</span>, action<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;store_true&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;不使用缓存&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--clear-cache&#39;</span>, action<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;store_true&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;清空缓存&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--cache-stats&#39;</span>, action<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;store_true&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;显示缓存统计&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--output&#39;</span>, <span style=color:#e6db74>&#39;-o&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;指定CSV输出文件名&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--format&#39;</span>, choices<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;csv&#39;</span>, <span style=color:#e6db74>&#39;json&#39;</span>, <span style=color:#e6db74>&#39;console&#39;</span>], default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;csv&#39;</span>, 
</span></span><span style=display:flex><span>                       help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;输出格式 (默认: csv)&#39;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    args <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    detector <span style=color:#f92672>=</span> TechDetectorWithCache()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 处理缓存相关命令</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> args<span style=color:#f92672>.</span>clear_cache:
</span></span><span style=display:flex><span>        detector<span style=color:#f92672>.</span>clear_cache()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> args<span style=color:#f92672>.</span>cache_stats:
</span></span><span style=display:flex><span>        detector<span style=color:#f92672>.</span>show_cache_stats()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果没有提供URL，交互式输入</span>
</span></span><span style=display:flex><span>    urls <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>urls
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> urls:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            url_input <span style=color:#f92672>=</span> input(<span style=color:#e6db74>&#34;请输入要检测的网站URL（多个URL用空格分隔）: &#34;</span>)<span style=color:#f92672>.</span>strip()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> url_input:
</span></span><span style=display:flex><span>                urls <span style=color:#f92672>=</span> url_input<span style=color:#f92672>.</span>split()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>KeyboardInterrupt</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>检测已取消&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> urls:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;未提供URL&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 检测所有URL</span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i, url <span style=color:#f92672>in</span> enumerate(urls, <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;[</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>{</span>len(urls)<span style=color:#e6db74>}</span><span style=color:#e6db74>] 检测中...&#34;</span>)
</span></span><span style=display:flex><span>        result <span style=color:#f92672>=</span> detector<span style=color:#f92672>.</span>detect(url, use_cache<span style=color:#f92672>=</span><span style=color:#f92672>not</span> args<span style=color:#f92672>.</span>no_cache)
</span></span><span style=display:flex><span>        results<span style=color:#f92672>.</span>append(result)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 显示结果</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> args<span style=color:#f92672>.</span>format <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;csv&#39;</span>:
</span></span><span style=display:flex><span>        detector<span style=color:#f92672>.</span>save_to_csv(results, args<span style=color:#f92672>.</span>output)
</span></span><span style=display:flex><span>        detector<span style=color:#f92672>.</span>display_console(results)  <span style=color:#75715e># 同时在控制台显示摘要</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> args<span style=color:#f92672>.</span>format <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;json&#39;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> result <span style=color:#f92672>in</span> results:
</span></span><span style=display:flex><span>            print(json<span style=color:#f92672>.</span>dumps(result, indent<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>, ensure_ascii<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:  <span style=color:#75715e># console</span>
</span></span><span style=display:flex><span>        detector<span style=color:#f92672>.</span>display_console(results)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div><aside class=post-toc><nav id=toc><nav id=TableOfContents></nav></nav></aside></main><footer class=footer><span>&copy; 2025 Merthon</span>
<span>Made with &#10084;&#65039; Hugo</span></footer></body></html>