<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D;--font-size:17.5px}</style><title>Java高级：类加载器（ClassLoader）笔记</title>
<meta name=description content="1.什么是类加载器 类加载器就是负责将.class 文件（实际存储到硬盘上的一些理文件）加载到内存中
关于类加载时机，用到就加载，不用就不加载
2.类加载器的过程 加载： 通过全限定名（包名+类名），获取这个类，准备用流来传输 将这个类加载到内存中 加载完毕创建一个 class 对象 链接 验证：看文件中信息是否虚拟机 …"><meta name=keywords content='blog,hugo,Java高级,java,笔记'><meta property="og:url" content="http://localhost:1313/posts/java%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8classloader%E7%AC%94%E8%AE%B0/"><meta property="og:type" content="website"><meta property="og:title" content="Java高级：类加载器（ClassLoader）笔记"><meta property="og:description" content="1.什么是类加载器 类加载器就是负责将.class 文件（实际存储到硬盘上的一些理文件）加载到内存中
关于类加载时机，用到就加载，不用就不加载
2.类加载器的过程 加载： 通过全限定名（包名+类名），获取这个类，准备用流来传输 将这个类加载到内存中 加载完毕创建一个 class 对象 链接 验证：看文件中信息是否虚拟机 …"><meta property="og:image" content="http://localhost:1313/images/cat.webp"><meta property="og:image:secure_url" content="http://localhost:1313/images/cat.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Java高级：类加载器（ClassLoader）笔记"><meta name=twitter:description content="1.什么是类加载器 类加载器就是负责将.class 文件（实际存储到硬盘上的一些理文件）加载到内存中
关于类加载时机，用到就加载，不用就不加载
2.类加载器的过程 加载： 通过全限定名（包名+类名），获取这个类，准备用流来传输 将这个类加载到内存中 加载完毕创建一个 class 对象 链接 验证：看文件中信息是否虚拟机 …"><meta property="twitter:domain" content="http://localhost:1313/posts/java%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8classloader%E7%AC%94%E8%AE%B0/"><meta property="twitter:url" content="http://localhost:1313/posts/java%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8classloader%E7%AC%94%E8%AE%B0/"><meta name=twitter:image content="http://localhost:1313/images/cat.webp"><link rel=canonical href=http://localhost:1313/posts/java%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8classloader%E7%AC%94%E8%AE%B0/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.275fedb6f364c8865658bae576d82b514ace973f6a13ed63503a85b20c697453.js integrity="sha256-J1/ttvNkyIZWWLrldtgrUUrOlz9qE+1jUDqFsgxpdFM="></script></head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://localhost:1313/><img src=/images/cat.webp alt=cat></a></div><div class=nav-title><a class=nav-brand href=http://localhost:1313/>Merthon</a></div><div class=nav-links><div class=nav-link><a href=http://localhost:1313/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=http://localhost:1313/posts/ aria-label><span data-feather=book></span> Posts</a></div><div class=nav-link><a href=http://localhost:1313/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=http://localhost:1313/tags/ aria-label><span data-feather=tag></span> Tags</a></div><div class=nav-link><a href=https://github.com/Merthon aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://localhost:1313/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=http://localhost:1313/posts/><span data-feather=book></span> Posts</a></li><li class=nav-item><a href=http://localhost:1313/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=http://localhost:1313/tags/><span data-feather=tag></span> Tags</a></li><li class=nav-item><a href=https://github.com/Merthon><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Java高级：类加载器（ClassLoader）笔记</h1><small role=doc-subtitle></small><p class=post-date>July 6, 2022</p><ul class=post-tags><li class=post-tag><a href=http://localhost:1313/tags/java%E9%AB%98%E7%BA%A7>Java高级</a></li><li class=post-tag><a href=http://localhost:1313/tags/java>java</a></li><li class=post-tag><a href=http://localhost:1313/tags/%E7%AC%94%E8%AE%B0>笔记</a></li></ul></div><div class=post-content><h3 id=1什么是类加载器>1.什么是类加载器</h3><p>类加载器就是负责将.class 文件（实际存储到硬盘上的一些理文件）加载到内存中</p><p>关于类加载时机，用到就加载，不用就不加载</p><h3 id=2类加载器的过程>2.类加载器的过程</h3><p><img src=/C:/Users/KevinWilliams/Desktop/blog/img/%E8%BF%87%E7%A8%8B.jpg alt=类加载过程></p><h5 id=加载>加载：</h5><ul><li>通过<strong>全限定名</strong>（包名+类名），获取这个类，准备用流来传输</li><li>将这个类加载到内存中</li><li>加载完毕创建一个 class 对象</li></ul><h5 id=链接>链接</h5><ul><li>验证：看文件中信息是否虚拟机规范要求，有无安全隐患</li><li>准备：初始化静态变量</li><li>解析：类中使用了其他类，此时要找到对应的类</li></ul><h5 id=初始化>初始化</h5><p>静态变量赋值以及初始化其他资源</p><h3 id=3类加载的分类>3.类加载的分类</h3><ul><li>启动类加载器（BootstrapClassLoader)：虚拟机内置的</li><li>平台类加载器（PlatformClassLoader）：负责加载 JDK 一些特殊模块</li><li>系统类加载器（SystemClassLoader）：负责加载用户类路径上所指定的类库</li></ul><h3 id=4双亲委派模型>4.双亲委派模型</h3><p>​ ClassLoader 的双亲委派模型中，各个 ClassLoader 之间的关系是通过组合关系来复用父加载器。当一个 ClassLoader 收到来类加载的请求，首先把该请求委派该父类 ClassLoader 处理，当父类 ClassLoader 无法处理时，才由当前类 ClassLoader 来处理。对于每个 ClassLoader 这个方式，也就是父类的优先于子类处理类加载的请求，那么也就是说任何一个请求第一次处理的便是最顶层的 Bootstrap ClassLoader(启动类加载器)。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassLoaderDemo2</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//获取系统类加载器getSystemClassLoader()</span>
</span></span><span style=display:flex><span>        ClassLoader systemClassLoader <span style=color:#f92672>=</span> ClassLoader.<span style=color:#a6e22e>getSystemClassLoader</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>//获取系统类加载器的父加载器getParent()   ---平台类加载器</span>
</span></span><span style=display:flex><span>        ClassLoader classLoader1 <span style=color:#f92672>=</span> systemClassLoader.<span style=color:#a6e22e>getParent</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>//获取系平台类加载器的父加载器getParent()   ---启动类加载器</span>
</span></span><span style=display:flex><span>        ClassLoader classLoader2 <span style=color:#f92672>=</span> classLoader1.<span style=color:#a6e22e>getParent</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(systemClassLoader);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//jdk.internal.loader.ClassLoaders$AppClassLoader@2437c6dc</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(classLoader1);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//jdk.internal.loader.ClassLoaders$PlatformClassLoader@880ec60</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(classLoader2);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//null</span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h3 id=5类加载器常用方法>5.类加载器常用方法</h3><ul><li>static ClassLoader getSystemClassloader() 获取一个系统类加载器</li><li>InputStream getResourceAsStream(String name) 加载某一个资源文件</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClassLoaderDemo1</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) <span style=color:#66d9ef>throws</span> IOException {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//ClassLoader getSystemClassloader()  获取一个类加载器</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//InputStream getResourceAsStream(String name)   加载某一个资源文件</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//1.获取一个类加载器</span>
</span></span><span style=display:flex><span>        ClassLoader classLoader <span style=color:#f92672>=</span> ClassLoader.<span style=color:#a6e22e>getSystemClassLoader</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>//2.利用加载器加载某一个资源文件</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//参数就是文件路径</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//返回值是字节流</span>
</span></span><span style=display:flex><span>        InputStream is <span style=color:#f92672>=</span> classLoader.<span style=color:#a6e22e>getResourceAsStream</span>(<span style=color:#e6db74>&#34;prop.properties&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//创建properties对象</span>
</span></span><span style=display:flex><span>        Properties prop <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Properties();
</span></span><span style=display:flex><span>        prop.<span style=color:#a6e22e>load</span>(is);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(prop);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//这里打的就是prop.properties配置里面的内容</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//释放资源</span>
</span></span><span style=display:flex><span>        is.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=prev-next></div><svg id="btt-button" class="arrow-logo" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div><aside class=post-toc><nav id=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#1什么是类加载器>1.什么是类加载器</a></li><li><a href=#2类加载器的过程>2.类加载器的过程</a></li><li><a href=#3类加载的分类>3.类加载的分类</a></li><li><a href=#4双亲委派模型>4.双亲委派模型</a></li><li><a href=#5类加载器常用方法>5.类加载器常用方法</a></li></ul></li></ul></li></ul></nav></nav></aside></main><footer class=footer><span>&copy; 2022 Merthon</span>
<span>Made with &#10084;&#65039; Hugo</span></footer></body></html>